<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        #paragraph{
            font-size: 48px;
            text-align: center;
        }
      
        #sent{
            font-size: 48px;
            text-align: center;
        }
    </style>
  </head>
  <body>
    <p id = "paragraph">Val</p>
    <p id = "sent">sent</p>
    <script>
        var O;
        var zAxis;
        var xAxis;
        var sent = 0;

        window.addEventListener("deviceorientation", function (event) { 
            with (event){
                zAxis = gamma;
                xAxis = webkitCompassHeading;
                with (Math) {
                    O =
                    "<pre>alpha = " +
                    round(alpha) +
                    "Â°\nbeta  = " +
                    round(beta) +
                    "Â°\ngamma = " +
                    round(zAxis) +
                    "Â°\ncompass = " +
                    round(xAxis) +
                    "Â°";
                }
                zAxis = gamma;
                xAxis = webkitCompassHeading;
            }
        });
       function sendData() {
         sent += 1;
         document.getElementById("sent").innerHTML = sent;
         var data = {
          "message": "Hello from HTML!"
         };

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://dweet.io/dweet/for/your-thing-name", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(JSON.stringify(data));
      }

      setInterval(sendData, 1000);
         
      setInterval(function () {
       if (O) document.getElementById("paragraph").innerHTML = O;
             //document.getElementById("sent").innerHTML = "";
       }, 40);
    </script>
  </body>
</html>
